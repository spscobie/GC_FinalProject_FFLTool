
@{
    ViewBag.Title = "Player List";
}
<link href="~/Content/StyleSheet1.css" rel="stylesheet" />

<div class="table-responsive ">
    <table id="tab2" class="table table-hover table-bordered" style="padding: 3px">
        <thead class="thead-dark" style="background-color: darkgrey">
            <tr>
                <th>Position</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Team</th>
                <th>Pass Att</th>
                <th>Pass Comp</th>
                <th>Pass Yds</th>
                <th>Pass TD</th>
                <th>Interceptions</th>
                <th>Rush Att</th>
                <th>Rush Yds</th>
                <th>Rush TD</th>
                <th>Receptions</th>
                <th>Receiving Yards</th>
                <th>Receiving TD</th>
                <th>Fg Att</th>
                <th>Fg Made</th>
            </tr>

        </thead>

    </table>

</div>

<h2>Player List</h2>

<br />
<br />
<div class="btn-group">
    <a href="/Home/SearchPlayers" class=" btn btn-info btn-lg">All</a>
    <a href="/Home/SearchPlayers?pos=QB" class=" btn btn-info btn-lg">QB</a>
    <a href="/Home/SearchPlayers?pos=RB" class=" btn btn-info btn-lg">RB</a>
    <a href="/Home/SearchPlayers?pos=WR" class=" btn btn-info btn-lg">WR</a>
    <a href="/Home/SearchPlayers?pos=TE" class=" btn btn-info btn-lg">TE</a>
    <a href="/Home/SearchPlayers?pos=K" class=" btn btn-info btn-lg">K</a>
    <form action="/Home/SearchPlayers">

        <input type="text" name="player" />
        <input type="hidden" name="pos" value="@ViewBag.Pos" />
        <input type="submit" value="Search" />
        <p style="color: brown">You must search by last name only!</p>
    </form>
</div>
<br />
<br />

<p>Click the button to sort the table alphabetically, by name:</p>
<p><button onclick="sortTable()">Sort</button></p>

@if (ViewBag.Players == null)
{
    <table class="table table-hover table-bordered">
        <thead class="thead-dark" style="background-color: darkgrey">
            <tr>
                <th>Position</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Team</th>
                <th>Pass Att</th>
                <th>Pass Comp</th>
                <th>Pass Yds</th>
                <th>Pass TD</th>
                <th>Interceptions</th>
                <th>Rush Att</th>
                <th>Rush Yds</th>
                <th>Rush TD</th>
                <th>Receptions</th>
                <th>Receiving Yards</th>
                <th>Receiving TD</th>
                <th>FG Att</th>
                <th>FG Made</th>
            </tr>
        </thead>
    </table>
}
else
{
    <div class="table-responsive">
        <table id="tab1" class="table table-bordered table-hover">
            <thead class="thead-dark" style="background-color: darkgrey">
                <tr>
                    <th>Position <button onclick="sortTable()" type="button" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span></button></th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Team</th>
                    <th>Pass Att</th>
                    <th>Pass Comp</th>
                    <th>Pass Yds</th>
                    <th>Pass TD</th>
                    <th>Interceptions</th>
                    <th>Rush Att</th>
                    <th>Rush Yds</th>
                    <th>Rush TD</th>
                    <th>Receptions</th>
                    <th>Receiving Yards</th>
                    <th>Receiving TD</th>
                    <th>FG Att</th>
                    <th>FG Made</th>
                </tr>
            </thead>
            <tbody>
                @for (int i = 0; i < 25@*ViewBag.Players.Count*@; i++)
                {
                    <tr class="active" style="background-color: whitesmoke">
                        <td style="display:none">@ViewBag.Players[i]["player"]["ID"]</td>
                        <td>@ViewBag.Players[i]["player"]["Position"]</td>
                        <td>@ViewBag.Players[i]["player"]["FirstName"]</td>
                        <td>@ViewBag.Players[i]["player"]["LastName"]</td>
                        <td>@ViewBag.Players[i]["team"]["Abbreviation"]</td>
                        <td>@(ViewBag.Players[i]["stats"]["PassAttempts"] == null || ViewBag.Players[i]["stats"]["PassAttempts"]["#text"] == "0" ? "-" : ViewBag.Players[i]["stats"]["PassAttempts"]["#text"])</td>
                        <td>@(ViewBag.Players[i]["stats"]["PassCompletions"] == null || ViewBag.Players[i]["stats"]["PassCompletions"]["#text"] == "0" ? "-" : ViewBag.Players[i]["stats"]["PassCompletions"]["#text"])</td>
                        <td>@(ViewBag.Players[i]["stats"]["PassYards"] == null || ViewBag.Players[i]["stats"]["PassYards"]["#text"] == "0" ? "-" : ViewBag.Players[i]["stats"]["PassYards"]["#text"])</td>
                        <td>@(ViewBag.Players[i]["stats"]["PassTD"] == null || ViewBag.Players[i]["stats"]["PassTD"]["#text"] == "0" ? "-" : ViewBag.Players[i]["stats"]["PassTD"]["#text"])</td>
                        <td>@(ViewBag.Players[i]["stats"]["PassInt"] == null || ViewBag.Players[i]["stats"]["PassInt"]["#text"] == "0" ? "-" : ViewBag.Players[i]["stats"]["PassInt"]["#text"])</td>

                        <td>@(ViewBag.Players[i]["stats"]["RushAttepmts"] == null || ViewBag.Players[i]["stats"]["RushAttepmts"]["#text"] == "0" ? "-" : ViewBag.Players[i]["stats"]["RushAttepmts"]["#text"])</td>
                        <td>@(ViewBag.Players[i]["stats"]["RushYards"] == null || ViewBag.Players[i]["stats"]["RushYards"]["#text"] == "0" ? "-" : ViewBag.Players[i]["stats"]["RushYards"]["#text"])</td>
                        <td>@(ViewBag.Players[i]["stats"]["RushTD"] == null || ViewBag.Players[i]["stats"]["RushTD"]["#text"] == "0" ? "-" : ViewBag.Players[i]["stats"]["RushTD"]["#text"])</td>

                        <td>@(ViewBag.Players[i]["stats"]["Receptions"] == null || ViewBag.Players[i]["stats"]["Receptions"]["#text"] == "0" ? "-" : ViewBag.Players[i]["stats"]["Receptions"]["#text"])</td>
                        <td>@(ViewBag.Players[i]["stats"]["RecYards"] == null || ViewBag.Players[i]["stats"]["RecYards"]["#text"] == "0" ? "-" : ViewBag.Players[i]["stats"]["RecYards"]["#text"])</td>
                        <td>@(ViewBag.Players[i]["stats"]["RecTD"] == null || ViewBag.Players[i]["stats"]["RecTD"]["#text"] == "0" ? "-" : ViewBag.Players[i]["stats"]["RecTD"]["#text"])</td>

                        <td>@(ViewBag.Players[i]["stats"]["FgAtt"] == null || ViewBag.Players[i]["stats"]["FgAtt"]["#text"] == "0" ? "-" : ViewBag.Players[i]["stats"]["FgAtt"]["#text"])</td>
                        <td>@(ViewBag.Players[i]["stats"]["FgMade"] == null || ViewBag.Players[i]["stats"]["FgMade"]["#text"] == "0" ? "-" : ViewBag.Players[i]["stats"]["FgMade"]["#text"])</td>

                        <td><input type="checkbox" name="check-tab1" /></td>
                        <td>
                            <a onclick="tab1_To_tab2()" class="btn btn-default btn-sm"> Add</a>
                        </td>
                    </tr>
                }
        </table>
    </div>
}
<script>
    function tab1_To_tab2() {
        var table1 = document.getElementById("tab1"),
            table2 = document.getElementById("tab2"),
            checkboxes = document.getElementsByName("check-tab1");

        for (var i = 0; i < checkboxes.length; i++)
            if (checkboxes[i].checked) {

                //Create new row and cells
                var newRow = tab2.insertRow(tab2.length),
                    cell1 = newRow.insertCell(0),
                    cell2 = newRow.insertCell(1),
                    cell3 = newRow.insertCell(2),
                    cell4 = newRow.insertCell(3),
                    cell5 = newRow.insertCell(4),
                    cell6 = newRow.insertCell(5),
                    cell7 = newRow.insertCell(6),
                    cell8 = newRow.insertCell(7),
                    cell9 = newRow.insertCell(8),
                    cell10 = newRow.insertCell(9),
                    cell11 = newRow.insertCell(10),
                    cell12 = newRow.insertCell(11),
                    cell13 = newRow.insertCell(12),
                    cell14 = newRow.insertCell(13),
                    cell15 = newRow.insertCell(14),
                    cell16 = newRow.insertCell(15),
                    cell17 = newRow.insertCell(16),
                    cell18 = newRow.insertCell(17),
                    cell19 = newRow.insertCell(18);

                //add values to the cells


                cell1.innerHTML = tab1.rows[i + 1].cells[1].innerHTML;
                cell2.innerHTML = tab1.rows[i + 1].cells[2].innerHTML;
                cell3.innerHTML = tab1.rows[i + 1].cells[3].innerHTML;
                cell4.innerHTML = tab1.rows[i + 1].cells[4].innerHTML;
                cell5.innerHTML = tab1.rows[i + 1].cells[5].innerHTML;
                cell6.innerHTML = tab1.rows[i + 1].cells[6].innerHTML;
                cell7.innerHTML = tab1.rows[i + 1].cells[7].innerHTML;
                cell8.innerHTML = tab1.rows[i + 1].cells[8].innerHTML;
                cell9.innerHTML = tab1.rows[i + 1].cells[9].innerHTML;
                cell10.innerHTML = tab1.rows[i + 1].cells[10].innerHTML;
                cell11.innerHTML = tab1.rows[i + 1].cells[11].innerHTML;
                cell12.innerHTML = tab1.rows[i + 1].cells[12].innerHTML;
                cell13.innerHTML = tab1.rows[i + 1].cells[13].innerHTML;
                cell14.innerHTML = tab1.rows[i + 1].cells[14].innerHTML;
                cell15.innerHTML = tab1.rows[i + 1].cells[15].innerHTML;
                cell16.innerHTML = tab1.rows[i + 1].cells[16].innerHTML;
                cell17.innerHTML = tab1.rows[i + 1].cells[17].innerHTML;
                cell18.innerHTML = "<input type='checkbox' name='check-tab2'>";
                cell19.innerHTML = "<a onclick='tab2_To_tab1()' class='btn btn-default btn-sm'>Delete</a>";


                //remove the transfered rows from the first table

                var index = tab1.rows[i + 1].rowIndex;
                tab1.deleteRow(index);
                //we have deleted some rows so the checkboxes.length have changed
                //so we have to decrement the value of i
                i--;

                console.log("yes");

            }
    }

    function tab2_To_tab1() {
        var table1 = document.getElementById("tab1"),
            table2 = document.getElementById("tab2"),
            checkboxes = document.getElementsByName("check-tab2");

        for (var i = 0; i < checkboxes.length; i++)
            if (checkboxes[i].checked) {

                //Create new row and cells
                var newRow = tab1.insertRow(tab1.length),
                    cell1 = newRow.insertCell(0),
                    cell2 = newRow.insertCell(1),
                    cell3 = newRow.insertCell(2),
                    cell4 = newRow.insertCell(3),
                    cell5 = newRow.insertCell(4),
                    cell6 = newRow.insertCell(5),
                    cell7 = newRow.insertCell(6),
                    cell8 = newRow.insertCell(7),
                    cell9 = newRow.insertCell(8),
                    cell10 = newRow.insertCell(9),
                    cell11 = newRow.insertCell(10),
                    cell12 = newRow.insertCell(11),
                    cell13 = newRow.insertCell(12),
                    cell14 = newRow.insertCell(13),
                    cell15 = newRow.insertCell(14),
                    cell16 = newRow.insertCell(15),
                    cell17 = newRow.insertCell(16),
                    cell18 = newRow.insertCell(17),
                    cell19 = newRow.insertCell(18);

                //add values to the cells


                cell1.innerHTML = tab2.rows[i + 1].cells[0].innerHTML;
                cell2.innerHTML = tab2.rows[i + 1].cells[1].innerHTML;
                cell3.innerHTML = tab2.rows[i + 1].cells[2].innerHTML;
                cell4.innerHTML = tab2.rows[i + 1].cells[3].innerHTML;
                cell5.innerHTML = tab2.rows[i + 1].cells[4].innerHTML;
                cell6.innerHTML = tab2.rows[i + 1].cells[5].innerHTML;
                cell7.innerHTML = tab2.rows[i + 1].cells[6].innerHTML;
                cell8.innerHTML = tab2.rows[i + 1].cells[7].innerHTML;
                cell9.innerHTML = tab2.rows[i + 1].cells[8].innerHTML;
                cell10.innerHTML = tab2.rows[i + 1].cells[9].innerHTML;
                cell11.innerHTML = tab2.rows[i + 1].cells[10].innerHTML;
                cell12.innerHTML = tab2.rows[i + 1].cells[11].innerHTML;
                cell13.innerHTML = tab2.rows[i + 1].cells[12].innerHTML;
                cell14.innerHTML = tab2.rows[i + 1].cells[13].innerHTML;
                cell15.innerHTML = tab2.rows[i + 1].cells[14].innerHTML;
                cell16.innerHTML = tab2.rows[i + 1].cells[15].innerHTML;
                cell17.innerHTML = tab2.rows[i + 1].cells[16].innerHTML;
                cell18.innerHTML = "<input type='checkbox' name='check-tab2'>";
                cell19.innerHTML = "<a onclick='tab2_To_tab1()' class='btn btn-default btn-sm'>Add</a>";


                //remove the transfered rows from the first table

                var index = tab2.rows[i + 1].rowIndex;
                tab2.deleteRow(index);
                //we have deleted some rows so the checkboxes.length have changed
                //so we have to decrement the value of i
                i--;

                console.log("yes");

            }
    }


</script>

<script>
    function sortTable() {
        var table, rows, switching, i, x, y, shouldSwitch;
        var xint = 0, yint = 0;
        table = document.getElementById("tab1");
        switching = true;
        /* Make a loop that will continue until
        no switching has been done: */
        while (switching) {
            // Start by saying: no switching is done:
            switching = false;
            rows = table.getElementsByTagName("TR");
            /* Loop through all table rows (except the
            first, which contains table headers): */
            for (i = 1; i < (rows.length - 1); i++) {
                // Start by saying there should be no switching:
                shouldSwitch = false;
                /* Get the two elements you want to compare,
                one from current row and one from the next: */
                x = rows[i].getElementsByTagName("TD")[5];
                y = rows[i + 1].getElementsByTagName("TD")[5];
                //console.log(x);
                //console.log(y);
                //console.log("---");
                // Check if the two rows should switch place:

                xint = parseInt(x.innerHTML);
                yint = parseInt(y.innerHTML);

                if (yint > xint) {

                    console.log(xint);
                    console.log(yint);
                    // I so, mark as a switch and break the loop:
                    shouldSwitch = true;
                    break;
                }
            }
            if (shouldSwitch) {
                /* If a switch has been marked, make the switch
                and mark that a switch has been done: */
                rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                switching = true;
            }
        }
    }

</script>

